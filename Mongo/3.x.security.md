
Mongo 3.x conf

```
cat /etc/mongod.conf
```

Ubuntu db location `/var/lib/mongodb`

# Add Security

1. Add super admin

```
mongo
> use admin;
> db.createUser( {user: "<USERNAME>", pwd: "<PASSWORD>",roles: [ { role: "root", db: "admin" } ] } );
> exit;
```

2. enable authorization

open mongo conf

```
sudo nano /etc/mongod.conf

```

add authorization setting

```yaml
...
## enabled auth
security:
 authorization: enabled
...
```

restart

```
sudo service mongod restart
```

unauthorized access will be refused from now

```bash
mongo
MongoDB shell version v3.4.4
connecting to: mongodb://127.0.0.1:27017
2017-05-15T00:49:34.208+0000 W NETWORK  [thread1] Failed to connect to 127.0.0.1:27017, in(checking socket for error after poll), reason: Connection refused
2017-05-15T00:49:34.209+0000 E QUERY    [thread1] Error: couldn't connect to server 127.0.0.1:27017, connection attempt failed :
connect@src/mongo/shell/mongo.js:237:13
@(connect):1:6
exception: connect failed
```

Add readwrite user for database

use <DATABASE>;
db.createUser( { user: "<USERNAME>", pwd: "<PASSWORD>", roles: [ { role: "readWrite", db: "<DATABASE>" } ] } );
